/* ------------------------------------------------------------------------------------ *\
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                  CÃ³digo do Transmissor                                 |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
\* ------------------------------------------------------------------------------------ */
// ------------------------------------------------------------------------------------ //

#include <Arduino.h>
#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

// ------------------------------------------------------------------------------------ //

void enviar(String dado);

// ------------------------------------------------------------------------------------ //

const char* ssid     = "Receptor";
const char* password = "b2de12a7_2kjda95fbdfa61Wr-";

String mensagem = "";

// ------------------------------------------------------------------------------------ //

HTTPClient url;

// --------------------------------------- SETUP -------------------------------------- //

void setup() {
	Serial.begin(115200);
	
	WiFi.mode(WIFI_STA);
	WiFi.begin(ssid, password);

	while(WiFi.status() != WL_CONNECTED){
		delay(500);
	}

}

// --------------------------------------- LOOP --------------------------------------- //

void loop() {
	if(Serial.available() > 0){
		mensagem = Serial.read();

		enviar(mensagem);
	}
}

// ------------------------------------------------------------------------------------ //

void enviar(String dado) {
	url.begin("http://10.0.1.9:5000/?comando=" + dado);
	url.GET();
	url.end();
}

// ------------------------------------------------------------------------------------ //
