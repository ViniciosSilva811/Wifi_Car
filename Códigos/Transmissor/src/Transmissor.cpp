/* ------------------------------------------------------------------------------------ *\
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                            CÃ³digo para a antena do controle                            |
|                                                                                        |
|                                                                                        |
|                                                                                        |
|                                                                                        |
\* ------------------------------------------------------------------------------------ */
// ------------------------------------------------------------------------------------ //

#include <Arduino.h>
#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

// ------------------------------------------------------------------------------------ //

void enviar(String dado);

// ------------------------------------------------------------------------------------ //

const char* ssid     = "LUIZ ANTONIO";
const char* password = "RITA@LEMOS";

String mensagem = "";

// ------------------------------------------------------------------------------------ //

HTTPClient url;

// --------------------------------------- SETUP -------------------------------------- //

void setup() {
	WiFi.mode(WIFI_STA);
	WiFi.begin(ssid, password);

	while(WiFi.status() != WL_CONNECTED){
		delay(500);
	}

	Serial.begin(115200);
}

// --------------------------------------- LOOP --------------------------------------- //

void loop() {
	if(Serial.available() > 0){
		mensagem = Serial.read();

		enviar(mensagem);
	}
}

// ------------------------------------------------------------------------------------ //

void enviar(String dado) {
	url.begin("http://10.0.1.9:5000/" + dado);
	url.GET();
	url.end();
}

// ------------------------------------------------------------------------------------ //